{{ $.Scratch.Add "labelClasses" "f6 b db mb1 mt3 sans-serif mid-gray" }}
{{ $.Scratch.Add "inputClasses" "w-100 f5 pv3 ph3 bg-light-gray bn" }}

<div id="contact-form-container">
  <form id="contact-form" class="black-80 sans-serif" accept-charset="UTF-8" action="{{ .Get "action" | default "/api/contact" }}" method="POST" role="form">
    
    <!-- Honeypot field for spam prevention (hidden from users) -->
    <input type="text" name="honeypot" style="display:none !important;" tabindex="-1" autocomplete="off" />
    
    <div class="form-field">
      <label class="{{ $.Scratch.Get "labelClasses" }}" for="name">{{ lang.Translate "yourName" }}</label>
      <input type="text" id="name" name="name" class="{{ $.Scratch.Get "inputClasses" }}" required placeholder=" " aria-labelledby="name"/>
      <div class="error-message f6 red" id="name-error" style="display: none;"></div>
    </div>

    <div class="form-field">
      <label class="{{ $.Scratch.Get "labelClasses" }}" for="email">{{ lang.Translate "emailAddress" }}</label>
      <input type="email" id="email" name="email" class="{{ $.Scratch.Get "inputClasses" }}" required placeholder=" " aria-labelledby="email"/>
      <div class="requirements f6 gray glow i ph3 overflow-hidden">
        {{ lang.Translate "emailRequiredNote" }}
      </div>
      <div class="error-message f6 red" id="email-error" style="display: none;"></div>
    </div>

    <div class="form-field">
      <label class="{{ $.Scratch.Get "labelClasses" }}" for="message">{{ lang.Translate "message" }}</label>
      <textarea id="message" name="message" class="{{ $.Scratch.Get "inputClasses" }} h4" required minlength="10" maxlength="2000" aria-labelledby="message"></textarea>
      <div class="f6 gray">{{ lang.Translate "messageLength" }}</div>
      <div class="error-message f6 red" id="message-error" style="display: none;"></div>
    </div>

    <button id="submit-btn" class="apple-btn apple-btn-primary db w-100 mv2" type="submit">
      <span id="submit-text">{{ lang.Translate "send" }}</span>
      <span id="loading-text" style="display: none;">{{ lang.Translate "sending" }}</span>
    </button>

  </form>

  <!-- Success message -->
  <div id="success-message" class="simple-block bg-light-green pa3 br2 green" style="display: none;">
    <div class="simple-block-content">
      <h3 class="f5 b mb2">{{ lang.Translate "messageSuccess" }}</h3>
      <p class="f6 mb0">{{ lang.Translate "messageSuccessDetails" }}</p>
    </div>
  </div>

  <!-- Error message -->
  <div id="error-message" class="simple-block bg-light-red pa3 br2 dark-red" style="display: none;">
    <div class="simple-block-content">
      <h3 class="f5 b mb2">{{ lang.Translate "messageFailed" }}</h3>
      <p class="f6 mb0" id="error-text">{{ lang.Translate "messageFailedDetails" }}</p>
    </div>
  </div>
</div>

<script>
// Pass i18n messages to JavaScript
window.contactFormMessages = {
  nameRequired: '{{ lang.Translate "nameRequired" }}',
  emailInvalid: '{{ lang.Translate "emailInvalid" }}',
  messageInvalid: '{{ lang.Translate "messageInvalid" }}'
};
</script>
<script src="/js/contact-form.js"></script>

<style>
/* Contact form specific styles using Apple design system */
#contact-form-container {
  max-width: var(--container-md, 800px);
  margin: 0 auto;
}

.form-field {
  margin-bottom: var(--space-lg, 2rem);
}

.error-message {
  margin-top: var(--space-xxs, 0.5rem);
  padding-left: var(--space-sm, 1rem);
}

/* Enhanced button styles */
.apple-btn-primary {
  background: var(--apple-blue, #0071e3);
  color: var(--apple-white, #ffffff);
  border: none;
  border-radius: 6px;
  padding: var(--space-sm, 1rem) var(--space-lg, 2rem);
  font-family: var(--font-system);
  font-size: var(--text-base, 1.0625rem);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast, 150ms);
}

.apple-btn-primary:hover:not(:disabled) {
  background: var(--apple-blue-hover, #0077ed);
  transform: translateY(-1px);
}

.apple-btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Success/Error message styles */
.bg-light-green {
  background-color: #d4edda;
}

.bg-light-red {
  background-color: #f8d7da;
}

.green {
  color: #155724;
}

.dark-red {
  color: #721c24;
}

/* Responsive improvements */
@media (max-width: 768px) {
  #contact-form-container {
    padding: 0 var(--space-md, 1.5rem);
  }
  
  .form-field {
    margin-bottom: var(--space-md, 1.5rem);
  }
}
</style>
