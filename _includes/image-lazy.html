{% comment %}
  Lazy Loading Image Component
  Usage: {% include image-lazy.html src="/path/to/image.jpg" alt="Description" class="optional-class" %}
  
  Optional parameters:
  - srcset: Responsive image sources
  - sizes: Responsive sizes attribute
  - class: Additional CSS classes
  - width: Image width (helps prevent layout shift)
  - height: Image height (helps prevent layout shift)
  - loading: Override loading behavior (default: lazy)
{% endcomment %}

<picture class="lazy-image-container {% if include.class %}{{ include.class }}{% endif %}">
  {% if include.srcset %}
  <source srcset="{{ include.srcset }}" 
          sizes="{{ include.sizes | default: '100vw' }}"
          type="image/webp">
  {% endif %}
  
  <img src="{{ include.src }}"
       alt="{{ include.alt }}"
       loading="{{ include.loading | default: 'lazy' }}"
       {% if include.width %}width="{{ include.width }}"{% endif %}
       {% if include.height %}height="{{ include.height }}"{% endif %}
       {% if include.srcset %}srcset="{{ include.srcset }}"{% endif %}
       {% if include.sizes %}sizes="{{ include.sizes }}"{% endif %}
       class="lazy-image"
       data-src="{{ include.src }}">
  
  <noscript>
    <img src="{{ include.src }}"
         alt="{{ include.alt }}"
         {% if include.width %}width="{{ include.width }}"{% endif %}
         {% if include.height %}height="{{ include.height }}"{% endif %}
         class="lazy-image-fallback">
  </noscript>
</picture>